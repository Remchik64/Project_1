{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { getApiUrl } from '../config/api';\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BackgroundProvider = ({\n  children\n}) => {\n  _s();\n  const [settings, setSettings] = useState(null);\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        const response = await axios.get(getApiUrl('/api/site-settings'));\n        setSettings(response.data);\n\n        // Применяем настройки фона\n        if (response.data.siteBackground === 'image' && response.data.siteBackgroundImage) {\n          document.body.style.backgroundImage = `url(${getApiUrl()}${response.data.siteBackgroundImage})`;\n          document.body.style.backgroundSize = 'cover';\n          document.body.style.backgroundPosition = 'center';\n          document.body.style.backgroundAttachment = 'fixed';\n          document.body.style.backgroundRepeat = 'no-repeat';\n          document.body.style.backgroundColor = '#f5f5f5'; // Фоновый цвет на случай, пока грузится изображение\n        } else {\n          document.body.style.backgroundImage = 'none';\n          document.body.style.backgroundColor = response.data.siteBackgroundColor || '#f5f5f5';\n        }\n        console.log('Применены настройки фона:', {\n          type: response.data.siteBackground,\n          image: response.data.siteBackgroundImage,\n          color: response.data.siteBackgroundColor\n        });\n      } catch (error) {\n        console.error('Ошибка при загрузке настроек фона:', error);\n        // Применяем дефолтный фон при ошибке\n        document.body.style.backgroundImage = 'none';\n        document.body.style.backgroundColor = '#f5f5f5';\n      }\n    };\n    fetchSettings();\n\n    // Очистка при размонтировании\n    return () => {\n      document.body.style.backgroundImage = 'none';\n      document.body.style.backgroundColor = '#f5f5f5';\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(BackgroundProvider, \"mCc1AI3nlnFR6PXJot/5Z7AXrOM=\");\n_c = BackgroundProvider;\nexport default BackgroundProvider;\nvar _c;\n$RefreshReg$(_c, \"BackgroundProvider\");","map":{"version":3,"names":["React","useEffect","useState","axios","getApiUrl","Fragment","_Fragment","jsxDEV","_jsxDEV","BackgroundProvider","children","_s","settings","setSettings","fetchSettings","response","get","data","siteBackground","siteBackgroundImage","document","body","style","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","backgroundRepeat","backgroundColor","siteBackgroundColor","console","log","type","image","color","error","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/sait-znakomstv/frontend/src/components/BackgroundProvider.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { getApiUrl } from '../config/api';\r\n\r\nconst BackgroundProvider = ({ children }) => {\r\n    const [settings, setSettings] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchSettings = async () => {\r\n            try {\r\n                const response = await axios.get(getApiUrl('/api/site-settings'));\r\n                setSettings(response.data);\r\n                \r\n                // Применяем настройки фона\r\n                if (response.data.siteBackground === 'image' && response.data.siteBackgroundImage) {\r\n                    document.body.style.backgroundImage = `url(${getApiUrl()}${response.data.siteBackgroundImage})`;\r\n                    document.body.style.backgroundSize = 'cover';\r\n                    document.body.style.backgroundPosition = 'center';\r\n                    document.body.style.backgroundAttachment = 'fixed';\r\n                    document.body.style.backgroundRepeat = 'no-repeat';\r\n                    document.body.style.backgroundColor = '#f5f5f5'; // Фоновый цвет на случай, пока грузится изображение\r\n                } else {\r\n                    document.body.style.backgroundImage = 'none';\r\n                    document.body.style.backgroundColor = response.data.siteBackgroundColor || '#f5f5f5';\r\n                }\r\n\r\n                console.log('Применены настройки фона:', {\r\n                    type: response.data.siteBackground,\r\n                    image: response.data.siteBackgroundImage,\r\n                    color: response.data.siteBackgroundColor\r\n                });\r\n            } catch (error) {\r\n                console.error('Ошибка при загрузке настроек фона:', error);\r\n                // Применяем дефолтный фон при ошибке\r\n                document.body.style.backgroundImage = 'none';\r\n                document.body.style.backgroundColor = '#f5f5f5';\r\n            }\r\n        };\r\n\r\n        fetchSettings();\r\n\r\n        // Очистка при размонтировании\r\n        return () => {\r\n            document.body.style.backgroundImage = 'none';\r\n            document.body.style.backgroundColor = '#f5f5f5';\r\n        };\r\n    }, []);\r\n\r\n    return <>{children}</>;\r\n};\r\n\r\nexport default BackgroundProvider; "],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,eAAe;AAAC,SAAAC,QAAA,IAAAC,SAAA,EAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACzC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAE9CD,SAAS,CAAC,MAAM;IACZ,MAAMa,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAACZ,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACjES,WAAW,CAACE,QAAQ,CAACE,IAAI,CAAC;;QAE1B;QACA,IAAIF,QAAQ,CAACE,IAAI,CAACC,cAAc,KAAK,OAAO,IAAIH,QAAQ,CAACE,IAAI,CAACE,mBAAmB,EAAE;UAC/EC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,eAAe,GAAG,OAAOnB,SAAS,CAAC,CAAC,GAAGW,QAAQ,CAACE,IAAI,CAACE,mBAAmB,GAAG;UAC/FC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACE,cAAc,GAAG,OAAO;UAC5CJ,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACG,kBAAkB,GAAG,QAAQ;UACjDL,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACI,oBAAoB,GAAG,OAAO;UAClDN,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACK,gBAAgB,GAAG,WAAW;UAClDP,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACM,eAAe,GAAG,SAAS,CAAC,CAAC;QACrD,CAAC,MAAM;UACHR,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,eAAe,GAAG,MAAM;UAC5CH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACM,eAAe,GAAGb,QAAQ,CAACE,IAAI,CAACY,mBAAmB,IAAI,SAAS;QACxF;QAEAC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;UACrCC,IAAI,EAAEjB,QAAQ,CAACE,IAAI,CAACC,cAAc;UAClCe,KAAK,EAAElB,QAAQ,CAACE,IAAI,CAACE,mBAAmB;UACxCe,KAAK,EAAEnB,QAAQ,CAACE,IAAI,CAACY;QACzB,CAAC,CAAC;MACN,CAAC,CAAC,OAAOM,KAAK,EAAE;QACZL,OAAO,CAACK,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;QAC1D;QACAf,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,eAAe,GAAG,MAAM;QAC5CH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACM,eAAe,GAAG,SAAS;MACnD;IACJ,CAAC;IAEDd,aAAa,CAAC,CAAC;;IAEf;IACA,OAAO,MAAM;MACTM,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,eAAe,GAAG,MAAM;MAC5CH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACM,eAAe,GAAG,SAAS;IACnD,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAOpB,OAAA,CAAAF,SAAA;IAAAI,QAAA,EAAGA;EAAQ,gBAAG,CAAC;AAC1B,CAAC;AAACC,EAAA,CA7CIF,kBAAkB;AAAA2B,EAAA,GAAlB3B,kBAAkB;AA+CxB,eAAeA,kBAAkB;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}