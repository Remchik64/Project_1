{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Sait-znakomstv2\\\\frontend\\\\src\\\\components\\\\BackgroundProvider.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { getApiUrl, getMediaUrl } from '../config/api';\nimport './BackgroundProvider.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BackgroundProvider = ({\n  children\n}) => {\n  _s();\n  const [settings, setSettings] = useState(null);\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        const response = await axios.get(getApiUrl('/api/site-settings'));\n        setSettings(response.data);\n      } catch (error) {\n        console.error('Ошибка при загрузке настроек фона:', error);\n      }\n    };\n    fetchSettings();\n    window.addEventListener('settingsUpdated', fetchSettings);\n    return () => {\n      window.removeEventListener('settingsUpdated', fetchSettings);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [(settings === null || settings === void 0 ? void 0 : settings.siteBackground) === 'image' && settings.siteBackgroundImage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background-image\",\n      style: {\n        backgroundImage: `url(${getMediaUrl(settings.siteBackgroundImage)})`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }, this), (!(settings !== null && settings !== void 0 && settings.siteBackground) || settings.siteBackground === 'color') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background-color\",\n      style: {\n        backgroundColor: (settings === null || settings === void 0 ? void 0 : settings.siteBackgroundColor) || '#f5f5f5'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }, this), children]\n  }, void 0, true);\n};\n_s(BackgroundProvider, \"mCc1AI3nlnFR6PXJot/5Z7AXrOM=\");\n_c = BackgroundProvider;\nexport default BackgroundProvider;\nvar _c;\n$RefreshReg$(_c, \"BackgroundProvider\");","map":{"version":3,"names":["React","useEffect","useState","axios","getApiUrl","getMediaUrl","jsxDEV","_jsxDEV","Fragment","_Fragment","BackgroundProvider","children","_s","settings","setSettings","fetchSettings","response","get","data","error","console","window","addEventListener","removeEventListener","siteBackground","siteBackgroundImage","className","style","backgroundImage","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","siteBackgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/Sait-znakomstv2/frontend/src/components/BackgroundProvider.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { getApiUrl, getMediaUrl } from '../config/api';\r\nimport './BackgroundProvider.css';\r\n\r\nconst BackgroundProvider = ({ children }) => {\r\n    const [settings, setSettings] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchSettings = async () => {\r\n            try {\r\n                const response = await axios.get(getApiUrl('/api/site-settings'));\r\n                setSettings(response.data);\r\n            } catch (error) {\r\n                console.error('Ошибка при загрузке настроек фона:', error);\r\n            }\r\n        };\r\n\r\n        fetchSettings();\r\n        window.addEventListener('settingsUpdated', fetchSettings);\r\n\r\n        return () => {\r\n            window.removeEventListener('settingsUpdated', fetchSettings);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {settings?.siteBackground === 'image' && settings.siteBackgroundImage && (\r\n                <div \r\n                    className=\"background-image\"\r\n                    style={{\r\n                        backgroundImage: `url(${getMediaUrl(settings.siteBackgroundImage)})`\r\n                    }}\r\n                />\r\n            )}\r\n            {(!settings?.siteBackground || settings.siteBackground === 'color') && (\r\n                <div \r\n                    className=\"background-color\"\r\n                    style={{\r\n                        backgroundColor: settings?.siteBackgroundColor || '#f5f5f5'\r\n                    }}\r\n                />\r\n            )}\r\n            {children}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default BackgroundProvider; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,WAAW,QAAQ,eAAe;AACtD,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElC,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACzC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAE9CD,SAAS,CAAC,MAAM;IACZ,MAAMc,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAACb,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACjEU,WAAW,CAACE,QAAQ,CAACE,IAAI,CAAC;MAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC9D;IACJ,CAAC;IAEDJ,aAAa,CAAC,CAAC;IACfM,MAAM,CAACC,gBAAgB,CAAC,iBAAiB,EAAEP,aAAa,CAAC;IAEzD,OAAO,MAAM;MACTM,MAAM,CAACE,mBAAmB,CAAC,iBAAiB,EAAER,aAAa,CAAC;IAChE,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIR,OAAA,CAAAE,SAAA;IAAAE,QAAA,GACK,CAAAE,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEW,cAAc,MAAK,OAAO,IAAIX,QAAQ,CAACY,mBAAmB,iBACjElB,OAAA;MACImB,SAAS,EAAC,kBAAkB;MAC5BC,KAAK,EAAE;QACHC,eAAe,EAAE,OAAOvB,WAAW,CAACQ,QAAQ,CAACY,mBAAmB,CAAC;MACrE;IAAE;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACJ,EACA,CAAC,EAACnB,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEW,cAAc,KAAIX,QAAQ,CAACW,cAAc,KAAK,OAAO,kBAC9DjB,OAAA;MACImB,SAAS,EAAC,kBAAkB;MAC5BC,KAAK,EAAE;QACHM,eAAe,EAAE,CAAApB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEqB,mBAAmB,KAAI;MACtD;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACJ,EACArB,QAAQ;EAAA,eACX,CAAC;AAEX,CAAC;AAACC,EAAA,CA1CIF,kBAAkB;AAAAyB,EAAA,GAAlBzB,kBAAkB;AA4CxB,eAAeA,kBAAkB;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}