{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{getApiUrl}from'../config/api';import SocialLinks from'./SocialLinks';import'./ProfileCard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileCard=_ref=>{let{profile}=_ref;const[imageError,setImageError]=useState(false);const[settings,setSettings]=useState(null);// Преобразуем строку интересов в массив, если она задана\nconst interestsArray=profile.interests?profile.interests.split(',').map(interest=>interest.trim()):[];// Формируем полный URL для фотографии\nconst photoUrl=profile.photo&&typeof profile.photo==='string'&&!profile.photo.startsWith('blob:')?`http://localhost:5000${profile.photo}`:null;useEffect(()=>{const fetchSettings=async()=>{try{const response=await axios.get(getApiUrl('/api/site-settings'));setSettings(response.data);}catch(error){console.error('Ошибка при загрузке настроек:',error);}};fetchSettings();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-image\",children:photoUrl&&!imageError?/*#__PURE__*/_jsx(\"img\",{src:photoUrl,alt:profile.name,onError:e=>{console.error('Ошибка загрузки изображения:',e.target.src);setImageError(true);}}):/*#__PURE__*/_jsxs(\"div\",{className:\"placeholder-image\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"100\",height:\"100\",viewBox:\"0 0 100 100\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"rect\",{width:\"100\",height:\"100\",fill:\"#E5E5E5\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"40\",r:\"20\",fill:\"#CCCCCC\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M20 80C20 63.4315 33.4315 50 50 50C66.5685 50 80 63.4315 80 80\",stroke:\"#CCCCCC\",strokeWidth:\"4\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0424\\u043E\\u0442\\u043E \\u043D\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:profile.name||'Имя не указано'}),/*#__PURE__*/_jsx(\"p\",{className:\"age\",children:profile.age?`${profile.age} лет`:'Возраст не указан'}),/*#__PURE__*/_jsxs(\"div\",{className:\"additional-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:profile.about||'Информация о себе не указана'}),interestsArray.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"interests\",children:interestsArray.map((interest,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"interest-tag\",children:interest},index))})]}),/*#__PURE__*/_jsx(SocialLinks,{profile:profile,settings:settings})]})]});};export default ProfileCard;","map":{"version":3,"names":["React","useState","useEffect","axios","getApiUrl","SocialLinks","jsx","_jsx","jsxs","_jsxs","ProfileCard","_ref","profile","imageError","setImageError","settings","setSettings","interestsArray","interests","split","map","interest","trim","photoUrl","photo","startsWith","fetchSettings","response","get","data","error","console","className","children","src","alt","name","onError","e","target","width","height","viewBox","fill","xmlns","cx","cy","r","d","stroke","strokeWidth","age","about","length","index"],"sources":["/home/renat/Project_1/frontend/src/components/ProfileCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getApiUrl } from '../config/api';\nimport SocialLinks from './SocialLinks';\nimport './ProfileCard.css';\n\nconst ProfileCard = ({ profile }) => {\n    const [imageError, setImageError] = useState(false);\n    const [settings, setSettings] = useState(null);\n    \n    // Преобразуем строку интересов в массив, если она задана\n    const interestsArray = profile.interests ? \n        profile.interests.split(',').map(interest => interest.trim()) : \n        [];\n\n    // Формируем полный URL для фотографии\n    const photoUrl = profile.photo && typeof profile.photo === 'string' && !profile.photo.startsWith('blob:') ? \n        `http://localhost:5000${profile.photo}` : \n        null;\n\n    useEffect(() => {\n        const fetchSettings = async () => {\n            try {\n                const response = await axios.get(getApiUrl('/api/site-settings'));\n                setSettings(response.data);\n            } catch (error) {\n                console.error('Ошибка при загрузке настроек:', error);\n            }\n        };\n\n        fetchSettings();\n    }, []);\n\n    return (\n        <div className=\"profile-card\">\n            <div className=\"profile-image\">\n                {photoUrl && !imageError ? (\n                    <img \n                        src={photoUrl} \n                        alt={profile.name} \n                        onError={(e) => {\n                            console.error('Ошибка загрузки изображения:', e.target.src);\n                            setImageError(true);\n                        }}\n                    />\n                ) : (\n                    <div className=\"placeholder-image\">\n                        <svg \n                            width=\"100\" \n                            height=\"100\" \n                            viewBox=\"0 0 100 100\" \n                            fill=\"none\" \n                            xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                            <rect width=\"100\" height=\"100\" fill=\"#E5E5E5\"/>\n                            <circle cx=\"50\" cy=\"40\" r=\"20\" fill=\"#CCCCCC\"/>\n                            <path d=\"M20 80C20 63.4315 33.4315 50 50 50C66.5685 50 80 63.4315 80 80\" stroke=\"#CCCCCC\" strokeWidth=\"4\"/>\n                        </svg>\n                        <span>Фото не загружено</span>\n                    </div>\n                )}\n            </div>\n            <div className=\"profile-info\">\n                <h2>{profile.name || 'Имя не указано'}</h2>\n                <p className=\"age\">{profile.age ? `${profile.age} лет` : 'Возраст не указан'}</p>\n                <div className=\"additional-info\">\n                    <p>{profile.about || 'Информация о себе не указана'}</p>\n                    {interestsArray.length > 0 && (\n                        <div className=\"interests\">\n                            {interestsArray.map((interest, index) => (\n                                <span key={index} className=\"interest-tag\">{interest}</span>\n                            ))}\n                        </div>\n                    )}\n                </div>\n                <SocialLinks profile={profile} settings={settings} />\n            </div>\n        </div>\n    );\n};\n\nexport default ProfileCard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}