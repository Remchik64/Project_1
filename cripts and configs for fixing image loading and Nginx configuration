[1mdiff --git a/check-profiles.sh b/check-profiles.sh[m
[1mnew file mode 100644[m
[1mindex 00000000..52e7c85a[m
[1m--- /dev/null[m
[1m+++ b/check-profiles.sh[m
[36m@@ -0,0 +1,121 @@[m
[32m+[m[32m#!/bin/bash[m
[32m+[m
[32m+[m[32m# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–Ω–∫–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö[m
[32m+[m[32m# –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º[m
[32m+[m
[32m+[m[32mecho "====== –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–Ω–∫–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö ======"[m
[32m+[m
[32m+[m[32m# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite[m
[32m+[m[32mDB_PATH="/opt/repo/backend/database.sqlite"[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö[m
[32m+[m[32mif [ ! -f "$DB_PATH" ]; then[m
[32m+[m[32m    echo "‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ –ø—É—Ç–∏: $DB_PATH"[m
[32m+[m[32m    exit 1[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mecho "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω–∞: $DB_PATH"[m
[32m+[m
[32m+[m[32m# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ)[m
[32m+[m[32mecho "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏..."[m
[32m+[m[32mchmod 644 "$DB_PATH"[m
[32m+[m
[32m+[m[32m# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö[m
[32m+[m[32mrun_query() {[m
[32m+[m[32m    sqlite3 "$DB_PATH" "$1"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–Ω–∫–µ—Ç[m
[32m+[m[32mTOTAL_COUNT=$(run_query "SELECT COUNT(*) FROM Profiles;")[m
[32m+[m[32mecho "–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∫–µ—Ç –≤ –±–∞–∑–µ: $TOTAL_COUNT"[m
[32m+[m
[32m+[m[32m# –ü–æ–¥—Å—á–µ—Ç –∞–Ω–∫–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º[m
[32m+[m[32mACTIVE_COUNT=$(run_query "SELECT COUNT(*) FROM Profiles WHERE status = 'active';")[m
[32m+[m[32mPENDING_COUNT=$(run_query "SELECT COUNT(*) FROM Profiles WHERE status = 'pending';")[m
[32m+[m[32mBLOCKED_COUNT=$(run_query "SELECT COUNT(*) FROM Profiles WHERE status = 'blocked';")[m
[32m+[m
[32m+[m[32mecho "–°—Ç–∞—Ç—É—Å—ã –∞–Ω–∫–µ—Ç:"[m
[32m+[m[32mecho "  - active (–∞–∫—Ç–∏–≤–Ω—ã–µ): $ACTIVE_COUNT"[m
[32m+[m[32mecho "  - pending (–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏): $PENDING_COUNT"[m
[32m+[m[32mecho "  - blocked (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ): $BLOCKED_COUNT"[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π[m
[32m+[m[32mPROFILES_WITHOUT_PHOTOS=$(run_query "SELECT COUNT(*) FROM Profiles WHERE photo IS NULL OR photo = '';")[m
[32m+[m[32mecho "–ê–Ω–∫–µ—Ç—ã –±–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ: $PROFILES_WITHOUT_PHOTOS"[m
[32m+[m
[32m+[m[32m# –í—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –∞–Ω–∫–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏[m
[32m+[m[32mecho "–ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∞–Ω–∫–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:"[m
[32m+[m[32mrun_query "SELECT id, name, status, created_at FROM Profiles ORDER BY id DESC LIMIT 5;"[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—É—Ç–∏ –∫ uploads –≤ API-–º–∞—Ä—à—Ä—É—Ç–∞—Ö[m
[32m+[m[32mecho ""[m
[32m+[m[32mecho "====== –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ ======"[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API URL –≤ .env.production[m
[32m+[m[32mFRONTEND_ENV="/opt/repo/frontend/.env.production"[m
[32m+[m[32mif [ -f "$FRONTEND_ENV" ]; then[m
[32m+[m[32m    API_URL=$(grep "REACT_APP_API_URL" "$FRONTEND_ENV" | cut -d'=' -f2)[m
[32m+[m[32m    echo "API URL –≤ .env.production: $API_URL"[m
[32m+[m[32melse[m
[32m+[m[32m    echo "–§–∞–π–ª .env.production –Ω–µ –Ω–∞–π–¥–µ–Ω"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ .env[m
[32m+[m[32mBACKEND_ENV="/opt/repo/backend/.env"[m
[32m+[m[32mif [ -f "$BACKEND_ENV" ]; then[m
[32m+[m[32m    UPLOAD_PATH=$(grep "UPLOAD_PATH" "$BACKEND_ENV" | cut -d'=' -f2)[m
[32m+[m[32m    echo "–ü—É—Ç—å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ .env: $UPLOAD_PATH"[m
[32m+[m[32melse[m
[32m+[m[32m    echo "–§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ uploads[m
[32m+[m[32mBACKEND_UPLOADS="/opt/repo/backend/uploads"[m
[32m+[m[32mif [ -d "$BACKEND_UPLOADS" ]; then[m
[32m+[m[32m    FILE_COUNT=$(find "$BACKEND_UPLOADS" -type f | wc -l)[m
[32m+[m[32m    echo "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è uploads –Ω–∞–π–¥–µ–Ω–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª–æ–≤: $FILE_COUNT"[m
[32m+[m[41m    [m
[32m+[m[32m    echo "–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ (–ø–µ—Ä–≤—ã–µ 10):"[m
[32m+[m[32m    find "$BACKEND_UPLOADS" -type f -exec basename {} \; | head -10[m
[32m+[m[32melse[m
[32m+[m[32m    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è uploads –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: $BACKEND_UPLOADS"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞[m
[32m+[m[32mecho ""[m
[32m+[m[32mecho "====== –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ ======"[m
[32m+[m[32mecho "–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ uploads:"[m
[32m+[m[32mls -la /opt/repo/backend/ | grep uploads[m
[32m+[m
[32m+[m[32m# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ uploads[m
[32m+[m[32mecho ""[m
[32m+[m[32mecho "====== –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx ======"[m
[32m+[m[32mecho "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ /uploads/:"[m
[32m+[m[32mgrep -A 5 "location /uploads/" /etc/nginx/sites-enabled/escort-bar.live || echo "–ú–∞—Ä—à—Ä—É—Ç /uploads/ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx"[m
[32m+[m
[32m+[m[32mecho "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ /api/uploads/:"[m
[32m+[m[32mgrep -A 5 "location /api/uploads/" /etc/nginx/sites-enabled/escort-bar.live || echo "–ú–∞—Ä—à—Ä—É—Ç /api/uploads/ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx"[m
[32m+[m
[32m+[m[32m# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é[m
[32m+[m[32mecho ""[m
[32m+[m[32mecho "====== –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ======"[m
[32m+[m[32mif [ "$ACTIVE_COUNT" -eq 0 ]; then[m
[32m+[m[32m    echo "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∫–µ—Ç! –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—ã —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mif [ "$TOTAL_COUNT" -eq 0 ]; then[m
[32m+[m[32m    echo "‚ùå –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –∞–Ω–∫–µ—Ç! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö."[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mif [ "$ACTIVE_COUNT" -gt 0 ] && [ "$FILE_COUNT" -eq 0 ]; then[m
[32m+[m[32m    echo "‚ùå –ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã, –Ω–æ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∑–∞–≥—Ä—É–∑–æ–∫."[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mecho ""[m
[32m+[m[32mecho "====== –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ ======"[m
[32m+[m[32mecho "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—à–µ."[m
[32m+[m[32mecho "–î–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–Ω–∫–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:"[m
[32m+[m[32mecho "sqlite3 $DB_PATH \"UPDATE Profiles SET status = 'active' WHERE status = 'pending';\""[m
[32m+[m
[32m+[m[32m# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞[m
[32m+[m[32mchmod 640 "$DB_PATH"[m[41m [m
\ No newline at end of file[m
[1mdiff --git a/clean-all-nginx-configs.sh b/clean-all-nginx-configs.sh[m
[1mnew file mode 100644[m
[1mindex 00000000..4c756694[m
[1m--- /dev/null[m
[1m+++ b/clean-all-nginx-configs.sh[m
[36m@@ -0,0 +1,117 @@[m
[32m+[m[32m#!/bin/bash[m
[32m+[m
[32m+[m[32m# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Nginx[m
[32m+[m[32m# –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–¥–Ω–æ–π —á–∏—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏[m
[32m+[m
[32m+[m[32m# –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞—Ç—É –¥–ª—è –∏–º–µ–Ω–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏[m
[32m+[m[32mBACKUP_DATE=$(